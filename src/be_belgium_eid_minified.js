// eid-javascript-lib version 1.7

// Copyright (c) 2009-2010 Johan De Schutter (eidjavascriptlib AT gmail DOT com), http://code.google.com/p/eid-javascript-lib/

// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:

// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.

// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

if(!window.be)window.be=new Object();if(!be.belgium)be.belgium=new Object();if(!be.belgium.eid)be.belgium.eid=new Object();be.belgium.eid.specialStatus={NO_STATUS:0,WHITE_CANE:1,EXTENDED_MINORITY:2,WHITE_CANE_AND_EXTENDED_MINORITY:3,YELLOW_CANE:4,YELLOW_CANE_AND_EXTENDED_MINORITY:5};be.belgium.eid.documentType={UNDEFINED:0,BELGIAN_CITIZEN:1,EU_CITIZEN:2,NON_EU_CITIZEN:3,KIDS_EID:6,BOOTSTRAP_CARD:7,HABILITATION_CARD:8,FOREIGNER_EID_A:11,FOREIGNER_EID_B:12,FOREIGNER_EID_C:13,FOREIGNER_EID_D:14,FOREIGNER_EID_E:15,FOREIGNER_EID_E_PLUS:16,FOREIGNER_EID_F:17,FOREIGNER_EID_F_PLUS:18};be.belgium.eid.sex={FEMALE:'F',MALE:'M'};be.belgium.eid.Exception=function(s){if(s===null||typeof(s)=="undefined")
this.message="";else
this.message=""+s;};be.belgium.eid.Exception.prototype=new Error;be.belgium.eid.Exception.prototype.name="Exception";be.belgium.eid.Exception.prototype.toString=function(){return this.name+": "+this.message;};be.belgium.eid.IllegalArgumentException=function(s){be.belgium.eid.Exception.call(this,s);};be.belgium.eid.IllegalArgumentException.prototype=new be.belgium.eid.Exception;be.belgium.eid.IllegalArgumentException.prototype.name="IllegalArgumentException";be.belgium.eid.NullPointerException=function(s){be.belgium.eid.Exception.call(this,s);};be.belgium.eid.NullPointerException.prototype=new be.belgium.eid.Exception;be.belgium.eid.NullPointerException.prototype.name="NullPointerException";be.belgium.eid.language={DUTCH:0,FRENCH:1,GERMAN:2};be.belgium.eid.dateFormat={DDMMYYYY:0,MMDDYYYY:1,YYYYMMDD:2,DD_MM_YYYY:3,MM_DD_YYYY:4,YYYY_MM_DD:5,EID_BIRTH_DATE:6};be.belgium.eid.DateFormatter=function(format){this.dateFormat=format;if(format===be.belgium.eid.dateFormat.EID_BIRTH_DATE)
this.dateSeparator=" ";else
this.dateSeparator="/";this.language=be.belgium.eid.language.DUTCH;this.eIDBirthDateAbbreviations=new Array(12);this.eIDBirthDateAbbreviations[0]=new Array("JAN");this.eIDBirthDateAbbreviations[1]=new Array("FEB","FEV");this.eIDBirthDateAbbreviations[2]=new Array("MAAR","MARS","MÄR","MAR");this.eIDBirthDateAbbreviations[3]=new Array("APR","AVR");this.eIDBirthDateAbbreviations[4]=new Array("MEI","MAI","MAI");this.eIDBirthDateAbbreviations[5]=new Array("JUN","JUIN");this.eIDBirthDateAbbreviations[6]=new Array("JUL","JUIL");this.eIDBirthDateAbbreviations[7]=new Array("AUG","AOUT");this.eIDBirthDateAbbreviations[8]=new Array("SEP","SEPT");this.eIDBirthDateAbbreviations[9]=new Array("OKT","OCT");this.eIDBirthDateAbbreviations[10]=new Array("NOV");this.eIDBirthDateAbbreviations[11]=new Array("DEC","DEC","DEZ");};be.belgium.eid.DateFormatter.prototype.setDateSeparator=function(separator){if(separator===null||typeof(separator)=="undefined")
return;separator=new String(separator);if(separator.length==0)
return;this.dateSeparator=separator.substr(0,1);};be.belgium.eid.DateFormatter.prototype.getDateSeparator=function(){return this.dateSeparator;};be.belgium.eid.DateFormatter.prototype.setLanguage=function(language){switch(language){case be.belgium.eid.language.DUTCH:case be.belgium.eid.language.FRENCH:case be.belgium.eid.language.GERMAN:this.language=language;break;}};be.belgium.eid.DateFormatter.prototype.getLanguage=function(){return this.language;};be.belgium.eid.DateFormatter.prototype.parse=function(dateString){if(dateString===null||typeof(dateString)=="undefined")
throw new be.belgium.eid.NullPointerException();var day=1;var month=1;var year=1970;if(this.dateFormat==be.belgium.eid.dateFormat.EID_BIRTH_DATE){var length=dateString.length;var regExp;if(length<11||length>12)
throw new be.belgium.eid.IllegalArgumentException();day=dateString.substr(0,2);for(var i=0;i<12;i++){regExp=new RegExp(this.eIDBirthDateAbbreviations[i].join("|"),"i");if(regExp.test(dateString)){month=(i+1);break;}}
year=dateString.substr((length-4),4);}else{switch(this.dateFormat){case be.belgium.eid.dateFormat.DDMMYYYY:if(dateString.length!=8)
throw new be.belgium.eid.IllegalArgumentException();day=dateString.substr(0,2);month=dateString.substr(2,2);year=dateString.substr(4,4);break;case be.belgium.eid.dateFormat.MMDDYYYY:if(dateString.length!=8)
throw new be.belgium.eid.IllegalArgumentException();month=dateString.substr(0,2);day=dateString.substr(2,2);year=dateString.substr(4,4);break;case be.belgium.eid.dateFormat.YYYYMMDD:if(dateString.length!=8)
throw new be.belgium.eid.IllegalArgumentException();year=dateString.substr(0,4);month=dateString.substr(4,2);day=dateString.substr(6,2);break;case be.belgium.eid.dateFormat.MM_DD_YYYY:if(dateString.length!=10)
throw new be.belgium.eid.IllegalArgumentException();month=dateString.substr(0,2);day=dateString.substr(3,2);year=dateString.substr(6,4);break;case be.belgium.eid.dateFormat.YYYY_MM_DD:if(dateString.length!=10)
throw new be.belgium.eid.IllegalArgumentException();year=dateString.substr(0,4);month=dateString.substr(5,2);day=dateString.substr(8,2);break;default:if(dateString.length!=10)
throw new be.belgium.eid.IllegalArgumentException();day=dateString.substr(0,2);month=dateString.substr(3,2);year=dateString.substr(6,4);break;}}
if(day==="  ")day=1;if(month==="  ")month=1;return new Date(year,(month-1),day,0,0,0,0);};be.belgium.eid.DateFormatter.prototype.format=function(date){if(date===null||typeof(date)=="undefined")
throw new be.belgium.eid.NullPointerException();var returnValue="";var day=date.getDate();if(day<10)day="0"+day;var month=date.getMonth();if(this.dateFormat==be.belgium.eid.dateFormat.EID_BIRTH_DATE){var nbrAbbrev=this.eIDBirthDateAbbreviations[month].length;if(this.language<0||this.language>=nbrAbbrev){month=this.eIDBirthDateAbbreviations[month][0];}else{month=this.eIDBirthDateAbbreviations[month][this.language];}}else{month=month+1;if(month<10)month="0"+month;}
var year=date.getFullYear();switch(this.dateFormat){case be.belgium.eid.dateFormat.DDMMYYYY:returnValue=""+day+""+month+""+year;break;case be.belgium.eid.dateFormat.MMDDYYYY:returnValue=""+month+""+day+""+year;break;case be.belgium.eid.dateFormat.YYYYMMDD:returnValue=""+year+""+month+""+day;break;case be.belgium.eid.dateFormat.MM_DD_YYYY:returnValue=""+month+this.dateSeparator+day+this.dateSeparator+year;break;case be.belgium.eid.dateFormat.YYYY_MM_DD:returnValue=""+year+this.dateSeparator+month+this.dateSeparator+day;break;case be.belgium.eid.dateFormat.EID_BIRTH_DATE:returnValue=""+day+this.dateSeparator+month+this.dateSeparator+year;break;default:returnValue=""+day+this.dateSeparator+month+this.dateSeparator+year;break;}
return returnValue;};be.belgium.eid.JavaObjectConvertor=new Object();be.belgium.eid.JavaObjectConvertor.toString=function(javaObject){if(javaObject===null||typeof(javaObject)=="undefined")
throw new be.belgium.eid.NullPointerException();return new String(javaObject);};be.belgium.eid.JavaObjectConvertor.toNumber=function(javaObject){if(javaObject===null||typeof(javaObject)=="undefined")
throw new be.belgium.eid.NullPointerException();var num=new Number(javaObject);if(isNaN(num))
throw new be.belgium.eid.IllegalArgumentException();else
return num;};be.belgium.eid.GenderParser=new Object();be.belgium.eid.GenderParser.parse=function(str){if(str===null||typeof(str)=="undefined")
throw new be.belgium.eid.NullPointerException();var regExp=new RegExp("F|V|W","i");if(regExp.test(str))
return be.belgium.eid.sex.FEMALE;else
return be.belgium.eid.sex.MALE;};be.belgium.eid.Card=function(){this.cardNumber=new String("");this.validityBeginDate=new Date(0);this.validityEndDate=new Date(0);};be.belgium.eid.Card.prototype.setCardNumber=function(cardNumber){if(cardNumber instanceof String)
this.cardNumber=cardNumber;else
this.cardNumber=new String(cardNumber);};be.belgium.eid.Card.prototype.getCardNumber=function(){return this.cardNumber;};be.belgium.eid.Card.prototype.setValidityBeginDate=function(beginDate){this.validityBeginDate=beginDate;};be.belgium.eid.Card.prototype.getValidityBeginDate=function(){return this.validityBeginDate;};be.belgium.eid.Card.prototype.setValidityEndDate=function(endDate){this.validityEndDate=endDate;};be.belgium.eid.Card.prototype.getValidityEndDate=function(){return this.validityEndDate;};be.belgium.eid.Card.prototype.toString=function(){var dateFormatter=new be.belgium.eid.DateFormatter(be.belgium.eid.dateFormat.DD_MM_YYYY);var newline="\r\n";var str="";str+="cardNumber: "+this.cardNumber+newline;str+="validityBeginDate: "+dateFormatter.format(this.validityBeginDate)+newline;str+="validityEndDate: "+dateFormatter.format(this.validityEndDate);return str;};be.belgium.eid.EIDCard=function(){this.chipNumber=new String("");this.issuingMunicipality=new String("");this.nationalNumber=new Number(0);this.surname=new String("");this.firstName1=new String("");this.firstName2=new String("");this.firstName3=new String("");this.nationality=new String("");this.birthLocation=new String("");this.birthDate=new Date(0);this.sex=be.belgium.eid.sex.FEMALE;this.nobleCondition=new String("");this.documentType=be.belgium.eid.documentType.BELGIAN_CITIZEN;this.specialStatus=be.belgium.eid.specialStatus.NO_STATUS;this.whiteCane=new Boolean(false);this.yellowCane=new Boolean(false);this.extendedMinority=new Boolean(false);this.street=new String("");this.streetNumber=new String("");this.boxNumber=new String("");this.zipCode=new Number(0);this.municipality=new String("");this.country=new String("");this.picture=null;};be.belgium.eid.EIDCard.prototype=new be.belgium.eid.Card;be.belgium.eid.EIDCard.prototype.toString=function(){var dateFormatter=new be.belgium.eid.DateFormatter(be.belgium.eid.dateFormat.DD_MM_YYYY);var newline="\r\n";var str="eID card"+newline;str+=be.belgium.eid.Card.prototype.toString.call(this)+newline;str+="chipNumber: "+this.chipNumber+newline;str+="issuingMunicipality: "+this.issuingMunicipality+newline;str+="nationalNumber: "+this.nationalNumber.toString()+newline;str+="surname: "+this.surname+newline;str+="firstName1: "+this.firstName1+newline;str+="firstName2: "+this.firstName2+newline;str+="firstName3: "+this.firstName3+newline;str+="nationality: "+this.nationality+newline;str+="birthLocation: "+this.birthLocation+newline;str+="birthDate: "+dateFormatter.format(this.birthDate)+newline;str+="sex: "+this.sex+newline;str+="nobleCondition: "+this.nobleCondition+newline;str+="documentType: "+this.documentType+newline;str+="specialStatus: "+this.specialStatus+newline;str+="whiteCane: "+this.whiteCane.toString()+newline;str+="yellowCane: "+this.yellowCane.toString()+newline;str+="extendedMinority: "+this.extendedMinority.toString()+newline;str+="street: "+this.street+newline;str+="streetNumber: "+this.streetNumber+newline;str+="boxNumber: "+this.boxNumber+newline;str+="zipCode: "+this.zipCode.toString()+newline;str+="municipality: "+this.municipality.toString()+newline;str+="country: "+this.country.toString()+newline;if(this.picture!==null){str+="A picture is available.";}else{str+="No picture available.";}
return str;};be.belgium.eid.EIDCard.prototype.setChipNumber=function(chipNumber){if(chipNumber instanceof String)
this.chipNumber=chipNumber;else
this.chipNumber=new String(chipNumber);};be.belgium.eid.EIDCard.prototype.getChipNumber=function(){return this.chipNumber;};be.belgium.eid.EIDCard.prototype.setIssuingMunicipality=function(municipality){if(municipality instanceof String)
this.issuingMunicipality=municipality;else
this.issuingMunicipality=new String(municipality);};be.belgium.eid.EIDCard.prototype.getIssuingMunicipality=function(){return this.issuingMunicipality;};be.belgium.eid.EIDCard.prototype.setNationalNumber=function(nationalNumber){if(nationalNumber instanceof Number)
this.nationalNumber=nationalNumber;else
this.nationalNumber=new Number(nationalNumber);};be.belgium.eid.EIDCard.prototype.getNationalNumber=function(){return this.nationalNumber.valueOf();};be.belgium.eid.EIDCard.prototype.setSurname=function(surname){if(surname instanceof String)
this.surname=surname;else
this.surname=new String(surname);};be.belgium.eid.EIDCard.prototype.getSurname=function(){return this.surname;};be.belgium.eid.EIDCard.prototype.setFirstName1=function(firstName1){if(firstName1 instanceof String)
this.firstName1=firstName1;else
this.firstName1=new String(firstName1);};be.belgium.eid.EIDCard.prototype.getFirstName1=function(){return this.firstName1;};be.belgium.eid.EIDCard.prototype.setFirstName2=function(firstName2){if(firstName2 instanceof String)
this.firstName2=firstName2;else
this.firstName2=new String(firstName2);};be.belgium.eid.EIDCard.prototype.getFirstName2=function(){return this.firstName2;};be.belgium.eid.EIDCard.prototype.setFirstName3=function(firstName3){if(firstName3 instanceof String)
this.firstName3=firstName3;else
this.firstName3=new String(firstName3);};be.belgium.eid.EIDCard.prototype.getFirstName3=function(){return this.firstName3;};be.belgium.eid.EIDCard.prototype.setNationality=function(nationality){if(nationality instanceof String)
this.nationality=nationality;else
this.nationality=new String(nationality);};be.belgium.eid.EIDCard.prototype.getNationality=function(){return this.nationality;};be.belgium.eid.EIDCard.prototype.setBirthLocation=function(birthLocation){if(birthLocation instanceof String)
this.birthLocation=birthLocation;else
this.birthLocation=new String(birthLocation);};be.belgium.eid.EIDCard.prototype.getBirthLocation=function(){return this.birthLocation;};be.belgium.eid.EIDCard.prototype.setBirthDate=function(birthDate){this.birthDate=birthDate;};be.belgium.eid.EIDCard.prototype.getBirthDate=function(){return this.birthDate;};be.belgium.eid.EIDCard.prototype.setSex=function(sex){this.sex=sex;};be.belgium.eid.EIDCard.prototype.getSex=function(){return this.sex;};be.belgium.eid.EIDCard.prototype.getFemale=function(){return(this.sex===be.belgium.eid.sex.FEMALE);};be.belgium.eid.EIDCard.prototype.getMale=function(){return(this.sex===be.belgium.eid.sex.MALE);};be.belgium.eid.EIDCard.prototype.setNobleCondition=function(nobleCondition){if(nobleCondition instanceof String)
this.nobleCondition=nobleCondition;else
this.nobleCondition=new String(nobleCondition);};be.belgium.eid.EIDCard.prototype.getNobleCondition=function(){return this.nobleCondition;};be.belgium.eid.EIDCard.prototype.setDocumentType=function(documentType){this.documentType=documentType;};be.belgium.eid.EIDCard.prototype.getDocumentType=function(){return this.documentType;};be.belgium.eid.EIDCard.prototype.setSpecialStatus=function(specialStatus){this.specialStatus=specialStatus;this.whiteCane=new Boolean(false);this.yellowCane=new Boolean(false);this.extendedMinority=new Boolean(false);switch(this.specialStatus){case be.belgium.eid.specialStatus.WHITE_CANE:this.whiteCane=new Boolean(true);break;case be.belgium.eid.specialStatus.EXTENDED_MINORITY:this.extendedMinority=new Boolean(true);break;case be.belgium.eid.specialStatus.WHITE_CANE_AND_EXTENDED_MINORITY:this.whiteCane=new Boolean(true);this.extendedMinority=new Boolean(true);break;case be.belgium.eid.specialStatus.YELLOW_CANE:this.yellowCane=new Boolean(true);break;case be.belgium.eid.specialStatus.YELLOW_CANE_AND_EXTENDED_MINORITY:this.yellowCane=new Boolean(true);this.extendedMinority=new Boolean(true);break;}};be.belgium.eid.EIDCard.prototype.getSpecialStatus=function(){return this.specialStatus;};be.belgium.eid.EIDCard.prototype.getWhiteCane=function(){return this.whiteCane.valueOf();};be.belgium.eid.EIDCard.prototype.getYellowCane=function(){return this.yellowCane.valueOf();};be.belgium.eid.EIDCard.prototype.getExtendedMinority=function(){return this.extendedMinority.valueOf();};be.belgium.eid.EIDCard.prototype.setStreet=function(street){if(street instanceof String)
this.street=street;else
this.street=new String(street);};be.belgium.eid.EIDCard.prototype.getStreet=function(){return this.street;};be.belgium.eid.EIDCard.prototype.setStreetNumber=function(streetNumber){if(streetNumber instanceof String)
this.streetNumber=streetNumber;else
this.streetNumber=new String(streetNumber);};be.belgium.eid.EIDCard.prototype.getStreetNumber=function(){return this.streetNumber;};be.belgium.eid.EIDCard.prototype.setBoxNumber=function(boxNumber){if(boxNumber instanceof String)
this.boxNumber=boxNumber;else
this.boxNumber=new String(boxNumber);};be.belgium.eid.EIDCard.prototype.getBoxNumber=function(){return this.boxNumber;};be.belgium.eid.EIDCard.prototype.setZipCode=function(zipCode){if(zipCode instanceof Number)
this.zipCode=zipCode;else
this.zipCode=new Number(zipCode);};be.belgium.eid.EIDCard.prototype.getZipCode=function(){return this.zipCode.valueOf();};be.belgium.eid.EIDCard.prototype.setMunicipality=function(municipality){if(municipality instanceof String)
this.municipality=municipality;else
this.municipality=new String(municipality);};be.belgium.eid.EIDCard.prototype.getMunicipality=function(){return this.municipality;};be.belgium.eid.EIDCard.prototype.setCountry=function(country){if(country instanceof String)
this.country=country;else
this.country=new String(country);};be.belgium.eid.EIDCard.prototype.getCountry=function(){return this.country;};be.belgium.eid.EIDCard.prototype.setPicture=function(pictureByteArray){this.picture=pictureByteArray;};be.belgium.eid.EIDCard.prototype.getPicture=function(){return this.picture;};be.belgium.eid.ForeignerEIDCard=function(){};be.belgium.eid.ForeignerEIDCard.prototype=new be.belgium.eid.EIDCard;be.belgium.eid.ForeignerEIDCard.prototype.toString=function(){var str="foreigner "+be.belgium.eid.EIDCard.prototype.toString.call(this);return str;};be.belgium.eid.KidsEIDCard=function(){this.documentType=be.belgium.eid.documentType.KIDS_EID;};be.belgium.eid.KidsEIDCard.prototype=new be.belgium.eid.EIDCard;be.belgium.eid.KidsEIDCard.prototype.toString=function(){var str="kids "+be.belgium.eid.EIDCard.prototype.toString.call(this);return str;};be.belgium.eid.SISCard=function(){this.socialSecurityNumber=new Number(0);this.surname=new String("");this.initials=new String("");this.name=new String("");this.sex=be.belgium.eid.sex.FEMALE;this.birthDate=new Date(0);};be.belgium.eid.SISCard.prototype=new be.belgium.eid.Card;be.belgium.eid.SISCard.prototype.toString=function(){var dateFormatter=new be.belgium.eid.DateFormatter(be.belgium.eid.dateFormat.DD_MM_YYYY);var newline="\r\n";var str="SIS card"+newline;str+=be.belgium.eid.Card.prototype.toString.call(this)+newline;str+="socialSecurityNumber: "+this.socialSecurityNumber.toString()+newline;str+="surname: "+this.surname+newline;str+="initials: "+this.initials+newline;str+="name: "+this.name+newline;str+="sex: "+this.sex+newline;str+="birthDate: "+dateFormatter.format(this.birthDate);return str;};be.belgium.eid.SISCard.prototype.setSocialSecurityNumber=function(socialSecurityNumber){if(socialSecurityNumber instanceof Number)
this.socialSecurityNumber=socialSecurityNumber;else
this.socialSecurityNumber=new Number(socialSecurityNumber);};be.belgium.eid.SISCard.prototype.getSocialSecurityNumber=function(){return this.socialSecurityNumber.valueOf();};be.belgium.eid.SISCard.prototype.setSurname=function(surname){if(surname instanceof String)
this.surname=surname;else
this.surname=new String(surname);};be.belgium.eid.SISCard.prototype.getSurname=function(){return this.surname;};be.belgium.eid.SISCard.prototype.setInitials=function(initials){if(initials instanceof String)
this.initials=initials;else
this.initials=new String(initials);};be.belgium.eid.SISCard.prototype.getInitials=function(){return this.initials;};be.belgium.eid.SISCard.prototype.setName=function(name){if(name instanceof String)
this.name=name;else
this.name=new String(name);};be.belgium.eid.SISCard.prototype.getName=function(){return this.name;};be.belgium.eid.SISCard.prototype.setSex=function(sex){this.sex=sex;};be.belgium.eid.SISCard.prototype.getSex=function(){return this.sex;};be.belgium.eid.SISCard.prototype.getFemale=function(){return(this.sex===be.belgium.eid.sex.FEMALE);};be.belgium.eid.SISCard.prototype.getMale=function(){return(this.sex===be.belgium.eid.sex.MALE);};be.belgium.eid.SISCard.prototype.setBirthDate=function(birthDate){this.birthDate=birthDate;};be.belgium.eid.SISCard.prototype.getBirthDate=function(){return this.birthDate;};be.belgium.eid.CardBuilder=function(){this.card=null;this.birthDateFormatter=null;this.validityDateFormatter=null;};be.belgium.eid.CardBuilder.prototype.getCard=function(){return this.card;};be.belgium.eid.CardBuilder.prototype.setCardNumber=function(cardNumber){try{if(this.card){var cardNumberString=be.belgium.eid.JavaObjectConvertor.toString(cardNumber);this.card.setCardNumber(cardNumberString);}}catch(e){}};be.belgium.eid.CardBuilder.prototype.setValidityDateBegin=function(validityDateBegin){try{if(this.card&&this.validityDateFormatter)
this.card.setValidityBeginDate(this.validityDateFormatter.parse(be.belgium.eid.JavaObjectConvertor.toString(validityDateBegin)));}catch(e){}};be.belgium.eid.CardBuilder.prototype.setValidityDateEnd=function(validityDateEnd){try{if(this.card&&this.validityDateFormatter)
this.card.setValidityEndDate(this.validityDateFormatter.parse(be.belgium.eid.JavaObjectConvertor.toString(validityDateEnd)));}catch(e){}};be.belgium.eid.CardBuilder.prototype.setBirthDate=function(birthDate){try{if(this.card&&this.birthDateFormatter)
this.card.setBirthDate(this.birthDateFormatter.parse(be.belgium.eid.JavaObjectConvertor.toString(birthDate)));}catch(e){}};be.belgium.eid.EIDCardBuilder35=function(cardNumber){var cardNumberString=new String("");try{cardNumberString=be.belgium.eid.JavaObjectConvertor.toString(cardNumber);}catch(e){}
if(cardNumberString.indexOf("B")==0){this.card=new be.belgium.eid.ForeignerEIDCard();}else if(cardNumberString.indexOf("610")==0){this.card=new be.belgium.eid.KidsEIDCard();}else{this.card=new be.belgium.eid.EIDCard();}
this.card.setCardNumber(cardNumberString);this.birthDateFormatter=new be.belgium.eid.DateFormatter(be.belgium.eid.dateFormat.EID_BIRTH_DATE);this.validityDateFormatter=new be.belgium.eid.DateFormatter(be.belgium.eid.dateFormat.DD_MM_YYYY);};be.belgium.eid.EIDCardBuilder35.prototype=new be.belgium.eid.CardBuilder;be.belgium.eid.EIDCardBuilder35.prototype.setChipNumber=function(chipNumber){try{this.card.setChipNumber(be.belgium.eid.JavaObjectConvertor.toString(chipNumber));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setIssMunicipality=function(issMunicipality){try{this.card.setIssuingMunicipality(be.belgium.eid.JavaObjectConvertor.toString(issMunicipality));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setNationalNumber=function(nationalNumber){try{var nationalNumberString=be.belgium.eid.JavaObjectConvertor.toString(nationalNumber);this.card.setNationalNumber(be.belgium.eid.JavaObjectConvertor.toNumber(nationalNumberString.valueOf()));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setSurname=function(surname){try{this.card.setSurname(be.belgium.eid.JavaObjectConvertor.toString(surname));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setFirstName=function(firstName){try{var firstnames=be.belgium.eid.JavaObjectConvertor.toString(firstName);var firstnamesArray=firstnames.split(" ");var length=firstnamesArray.length;if(length>=3){if(firstnamesArray[length-1].length==1){this.card.setFirstName3(firstnamesArray[length-1]);firstnamesArray.pop();if(firstnamesArray.length==2){this.card.setFirstName2(firstnamesArray[1]);firstnames=firstnamesArray[0];}else{firstnames=firstnamesArray.join(" ");}}}
this.card.setFirstName1(firstnames);}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setNationality=function(nationality){try{this.card.setNationality(be.belgium.eid.JavaObjectConvertor.toString(nationality));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setBirthLocation=function(birthLocation){try{this.card.setBirthLocation(be.belgium.eid.JavaObjectConvertor.toString(birthLocation));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setSex=function(sex){try{this.card.setSex(be.belgium.eid.GenderParser.parse(be.belgium.eid.JavaObjectConvertor.toString(sex)));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setNobleCondition=function(nobleCondition){try{this.card.setNobleCondition(be.belgium.eid.JavaObjectConvertor.toString(nobleCondition));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setSpecialStatus=function(specialStatus){try{var specialStatusString=be.belgium.eid.JavaObjectConvertor.toString(specialStatus);specialStatus=be.belgium.eid.JavaObjectConvertor.toNumber(specialStatusString.valueOf());this.card.setSpecialStatus(specialStatus.valueOf());}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setStreet=function(street){try{this.card.setStreet(be.belgium.eid.JavaObjectConvertor.toString(street));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setStreetNumber=function(streetNumber){try{this.card.setStreetNumber(be.belgium.eid.JavaObjectConvertor.toString(streetNumber));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setBoxNumber=function(boxNumber){try{this.card.setBoxNumber(be.belgium.eid.JavaObjectConvertor.toString(boxNumber));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setZip=function(zip){try{var zipString=be.belgium.eid.JavaObjectConvertor.toString(zip);this.card.setZipCode(be.belgium.eid.JavaObjectConvertor.toNumber(zipString.valueOf()));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setMunicipality=function(municipality){try{this.card.setMunicipality(be.belgium.eid.JavaObjectConvertor.toString(municipality));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setCountry=function(country){try{this.card.setCountry(be.belgium.eid.JavaObjectConvertor.toString(country));}catch(e){}};be.belgium.eid.EIDCardBuilder35.prototype.setPicture=function(pictureByteArray){try{this.card.setPicture(pictureByteArray);}catch(e){}};be.belgium.eid.SISCardBuilder35=function(){this.card=new be.belgium.eid.SISCard();this.birthDateFormatter=new be.belgium.eid.DateFormatter(be.belgium.eid.dateFormat.DD_MM_YYYY);this.validityDateFormatter=new be.belgium.eid.DateFormatter(be.belgium.eid.dateFormat.DD_MM_YYYY);};be.belgium.eid.SISCardBuilder35.prototype=new be.belgium.eid.CardBuilder;be.belgium.eid.SISCardBuilder35.parseSocialSecurityNumber=function(appletNumberString){var str=be.belgium.eid.JavaObjectConvertor.toString(appletNumberString);if(str.length!=13)
throw new be.belgium.eid.IllegalArgumentException();var numberStr=str.substr(0,6)+str.substr(7,3)+str.substr(11,2);return be.belgium.eid.JavaObjectConvertor.toNumber(numberStr);};be.belgium.eid.SISCardBuilder35.prototype.setNationalNumber=function(nationalNumber){try{this.card.setSocialSecurityNumber(be.belgium.eid.SISCardBuilder35.parseSocialSecurityNumber(nationalNumber));}catch(e){}};be.belgium.eid.SISCardBuilder35.prototype.setSurname=function(surname){try{this.card.setSurname(be.belgium.eid.JavaObjectConvertor.toString(surname));}catch(e){}};be.belgium.eid.SISCardBuilder35.prototype.setFirstName=function(firstName){try{this.card.setName(be.belgium.eid.JavaObjectConvertor.toString(firstName));}catch(e){}};be.belgium.eid.SISCardBuilder35.prototype.setInitials=function(initials){try{this.card.setInitials(be.belgium.eid.JavaObjectConvertor.toString(initials));}catch(e){}};be.belgium.eid.SISCardBuilder35.prototype.setSex=function(sex){try{this.card.setSex(be.belgium.eid.GenderParser.parse(be.belgium.eid.JavaObjectConvertor.toString(sex)));}catch(e){}};be.belgium.eid.CardReader=function(readerName){this.readerName="";this.setReaderName(readerName);this.appletLauncherId="BEIDAppletLauncher";this.noCardPresentHandler=null;this.noReaderDetectedHandler=null;this.appletNotFoundHandler=null;this.appletExceptionHandler=null;this.BEIDApplet=null;};be.belgium.eid.CardReader.prototype.getBEIDApplet=function(){if(!this.BEIDApplet){if(document.getElementById(this.appletLauncherId)){if(document.getElementById(this.appletLauncherId).getSubApplet){this.BEIDApplet=document.getElementById(this.appletLauncherId).getSubApplet();}else{this.BEIDApplet=document.getElementById(this.appletLauncherId);}}
if(!this.BEIDApplet)
throw new be.belgium.eid.NullPointerException();}
return this.BEIDApplet;};be.belgium.eid.CardReader.prototype.setReaderName=function(readerName){if(readerName===null||typeof(readerName)=="undefined")
this.readerName="";else if(readerName instanceof String)
this.readerName=readerName.valueOf();else
this.readerName=readerName;};be.belgium.eid.CardReader.prototype.getReaderName=function(){return this.readerName;};be.belgium.eid.CardReader.prototype.setAppletLauncherId=function(appletLauncherId){this.appletLauncherId=appletLauncherId;this.BEIDApplet=null;};be.belgium.eid.CardReader.prototype.getAppletLauncherId=function(){return this.appletLauncherId;};be.belgium.eid.CardReader.prototype.setNoCardPresentHandler=function(handler){if(handler!==null&&typeof(handler)!="undefined"&&(typeof(handler)=="function"||handler instanceof Function))
this.noCardPresentHandler=handler;else
this.noCardPresentHandler=null;};be.belgium.eid.CardReader.prototype.setNoReaderDetectedHandler=function(handler){if(handler!==null&&typeof(handler)!="undefined"&&(typeof(handler)=="function"||handler instanceof Function))
this.noReaderDetectedHandler=handler;else
this.noReaderDetectedHandler=null;};be.belgium.eid.CardReader.prototype.setAppletNotFoundHandler=function(handler){if(handler!==null&&typeof(handler)!="undefined"&&(typeof(handler)=="function"||handler instanceof Function))
this.appletNotFoundHandler=handler;else
this.appletNotFoundHandler=null;};be.belgium.eid.CardReader.prototype.setAppletExceptionHandler=function(handler){if(handler!==null&&typeof(handler)!="undefined"&&(typeof(handler)=="function"||handler instanceof Function))
this.appletExceptionHandler=handler;else
this.appletExceptionHandler=null;};be.belgium.eid.CardReader.prototype.getReaderNames=function(){var readerNames=new Array(0);try{this.getBEIDApplet().InitLib(null);var nbrReaders=this.BEIDApplet.readerCount();readerNames=new Array(nbrReaders);for(var i=0;i<nbrReaders;i++){readerNames[i]=""+this.BEIDApplet.getReaderByNum(i);}}catch(e){}
try{this.getBEIDApplet().exitLib();}catch(e){}
return readerNames;};be.belgium.eid.CardReader.prototype.getDefaultReaderName=function(){var defaultReaderName="";try{this.getBEIDApplet().InitLib(null);defaultReaderName=""+this.BEIDApplet.getReaderByNum(0);}catch(e){}
try{this.getBEIDApplet().exitLib();}catch(e){}
return defaultReaderName;};be.belgium.eid.CardReader.prototype.determineReaderName=function(){if(this.readerName===null||this.readerName===""){var parameterReaderName=""+this.getBEIDApplet().getParameter("Reader");if(parameterReaderName===null||parameterReaderName===""){this.readerName=this.getDefaultReaderName();}else{this.readerName=parameterReaderName;}}};be.belgium.eid.CardReader.prototype.isCardPresent=function(){var cardPresent=false;this.determineReaderName();if(this.readerName!==""){try{cardPresent=this.BEIDApplet.isCardPresent(this.readerName);}catch(e){}}
return cardPresent;};be.belgium.eid.CardReader.validChipNumber=function(chipNumber){try{chipNumber=be.belgium.eid.JavaObjectConvertor.toString(chipNumber);if(chipNumber.length==0){return false;}else{return true;}}catch(e){return false;}};be.belgium.eid.CardReader.prototype.read=function(){var card=null;var cardBuilder=null;try{this.getBEIDApplet().InitLib(null);this.determineReaderName();if(this.readerName===""){if(this.noReaderDetectedHandler)
this.noReaderDetectedHandler();try{this.getBEIDApplet().exitLib();}catch(e){}
return null;}
this.getBEIDApplet().InitLib(this.readerName);if(this.BEIDApplet.isCardPresent(this.readerName)){if(be.belgium.eid.CardReader.validChipNumber(this.BEIDApplet.getChipNumber())){cardBuilder=new be.belgium.eid.EIDCardBuilder35(this.BEIDApplet.getCardNumber());cardBuilder.setChipNumber(this.BEIDApplet.getChipNumber());cardBuilder.setValidityDateBegin(this.BEIDApplet.getValidityDateBegin());cardBuilder.setValidityDateEnd(this.BEIDApplet.getValidityDateEnd());cardBuilder.setIssMunicipality(this.BEIDApplet.getIssMunicipality());cardBuilder.setNationalNumber(this.BEIDApplet.getNationalNumber());cardBuilder.setSurname(this.BEIDApplet.getSurname());cardBuilder.setFirstName(this.BEIDApplet.getFirstName());cardBuilder.setNationality(this.BEIDApplet.getNationality());cardBuilder.setBirthLocation(this.BEIDApplet.getBirthLocation());cardBuilder.setBirthDate(this.BEIDApplet.getBirthDate());cardBuilder.setSex(this.BEIDApplet.getSex());cardBuilder.setNobleCondition(this.BEIDApplet.getNobleCondition());cardBuilder.setSpecialStatus(this.BEIDApplet.getSpecialStatus());cardBuilder.setStreet(this.BEIDApplet.getStreet());cardBuilder.setStreetNumber(this.BEIDApplet.getStreetNumber());cardBuilder.setBoxNumber(this.BEIDApplet.getBoxNumber());cardBuilder.setZip(this.BEIDApplet.getZip());cardBuilder.setMunicipality(this.BEIDApplet.getMunicipality());cardBuilder.setCountry(this.BEIDApplet.getCountry());cardBuilder.setPicture(this.BEIDApplet.GetPicture());}else{cardBuilder=new be.belgium.eid.SISCardBuilder35();cardBuilder.setCardNumber(this.BEIDApplet.getCardNumber());cardBuilder.setValidityDateBegin(this.BEIDApplet.getValidityDateBegin());cardBuilder.setValidityDateEnd(this.BEIDApplet.getValidityDateEnd());cardBuilder.setNationalNumber(this.BEIDApplet.getNationalNumber());cardBuilder.setSurname(this.BEIDApplet.getSurname());cardBuilder.setFirstName(this.BEIDApplet.getFirstName());cardBuilder.setInitials(this.BEIDApplet.getInitials());cardBuilder.setBirthDate(this.BEIDApplet.getBirthDate());cardBuilder.setSex(this.BEIDApplet.getSex());}
card=cardBuilder.getCard();}else{if(this.noCardPresentHandler)
this.noCardPresentHandler();}}catch(e){if(e instanceof be.belgium.eid.NullPointerException){if(this.appletNotFoundHandler){this.appletNotFoundHandler();}else{window.alert("BEID Applet not found.");}}else{if(this.appletExceptionHandler){if(this.appletExceptionHandler.length>0)
this.appletExceptionHandler(e);else
this.appletExceptionHandler();}else{window.alert("BEID Applet throw exception: "+e);}}}
try{this.getBEIDApplet().exitLib();}catch(e){}
return card;};be.belgium.eid.CardReader.prototype.reset=function(){try{this.getBEIDApplet().InitLib(null);}catch(e){}
try{this.getBEIDApplet().exitLib();}catch(e){}};